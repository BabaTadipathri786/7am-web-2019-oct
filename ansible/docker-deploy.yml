---
    - hosts: tomcat
      become: true
      vars:
        - nexus_repo: dummy
        - user: admin
        - password: dummy
        - docker_image: dummy
      tasks:
        - name: install pip
          yum:
            name: python-pip
            state: present
        - name: install docker-py
          pip:
            name: docker-py
            state: present
        - name: Install docker 
          yum:
            name: docker
            state: present
        - name: config daemon.json
          copy:
            src: daemon.json
            dest: /etc/docker/daemon.json
        - name: Connet to nexus
            command: "docker login {{nexus_repo}} -u {{user}} -p {{password}}"
        - name: run docker container
          docker_container:
            name: javahome
            image: "{{docker_image}}"